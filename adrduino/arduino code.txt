#include <SPI.h>
#include <Ethernet.h>

byte mac[] = { 0x00, 0x08, 0xDC, 0x1F, 0x30, 0xE8 }; 
IPAddress ip(192, 168, 1, 154);  
EthernetServer server(5000);

const int ledPin = 8;

void setup() {

    Serial.begin(9600);
    Serial.println("Arduino is ready");
    Ethernet.begin(mac, ip);
    server.begin();
    pinMode(ledPin, OUTPUT);
}

void loop() {
    EthernetClient client = server.available();
    if (client) {
        Serial.println(client);
        String command = "";
        while (client.connected()) {
            if (client.available()) {
                char c = client.read();
                command += c;
                if (c == '\n') {
                    if (command.startsWith("ON")) {
                        digitalWrite(ledPin, HIGH);
                    } else if (command.startsWith("OFF")) {
                        digitalWrite(ledPin, LOW);
                    }
                    command = "";
                }
            }
        }
        client.stop();
    }
}
